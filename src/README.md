```markdown:src/README.md
# 加密流量异常检测系统

## 项目结构
```
src/
├── __init__.py
├── config.py          # 配置文件
├── feature_extraction.py  # 特征提取模块
├── isolation_forest.py    # 核心算法模块
├── main.py           # 主程序入口
├── test.py           # 测试评估模块
└── utils.py          # 工具函数模块
```

## 项目说明
本项目是一个基于改进孤立森林算法的加密流量异常检测系统。系统能够对加密流量进行分类，并能识别未知类别的流量。

### 主要特点
1. 使用统计特征进行特征提取
2. 结合深度学习和孤立森林的混合模型
3. 动态知识库更新机制
4. 支持三种测试场景 

## 技术架构

### 1. 特征提取层 (feature_extraction.py)
从原始加密流量中提取统计特征：
- 包长度统计（均值、标准差）
- 时间间隔特征
- 流量持续时间
- 数据包数量统计

### 2. 核心算法层 (isolation_forest.py)
包含两个主要组件：
- **特征编码器(FeatureEncoder)**
  - 基于深度学习的特征压缩
  - 非线性特征表示
  
- **增强型孤立森林(EnhancedIsolationForest)**
  - 异常检测功能
  - 类别分类能力
  - 知识库动态更新

### 3. 评估测试层 (test.py)
支持三种测试场景：
1. 已知类别流量测试
2. 未知类别流量测试
3. 混合场景测试

## 使用指南

### 环境要求
- Python 3.8+
- PyTorch 1.7+
- scikit-learn 0.24+
- numpy 1.19+

### 安装依赖
```bash
pip install -r requirements.txt
```

### 数据准备
1. 数据格式要求：
```python
{
    'flows': np.array,  # 流量数据
    'labels': np.array  # 对应标签
}
```

2. 数据目录结构：
```
data/
├── train.npz          # 训练数据
├── known_test.npz     # 已知类别测试数据
├── unknown_test.npz   # 未知类别测试数据
└── mixed_test.npz     # 混合场景测试数据
```

### 配置说明
在`config.py`中可以配置以下参数：
- 模型参数（树的数量、异常比例等）
- 训练参数（批次大小、训练轮数等）
- 特征提取参数（窗口大小等）
- 路径配置
- 日志配置

### 运行方法

1. 训练模型：
```bash
python main.py
```

2. 查看结果：
- 模型文件：`models/model.pth`
- 日志文件：`logs/run.log`
- 测试结果：`results/`

## 性能指标
系统评估指标包括：
- 准确率 (Accuracy)
- 正常样本检测率
- 未知样本检测率
- 详细分类报告

## 注意事项
1. 数据预处理：
   - 确保数据格式正确
   - 处理缺失值和异常值
   
2. 模型训练：
   - 根据数据规模调整批次大小
   - 监控内存使用情况
   
3. 参数调优：
   - 根据实际场景调整异常检测阈值
   - 适当设置特征提取窗口大小

## 常见问题
1. 内存不足：
   - 减小批次大小
   - 使用数据生成器
   
2. 模型不收敛：
   - 检查学习率设置
   - 调整网络结构
   
3. 检测效果不佳：
   - 优化特征提取
   - 调整模型参数

## 开发计划
- [ ] 添加更多特征提取方法
- [ ] 优化深度学习模型结构
- [ ] 实现增量学习机制
- [ ] 添加可视化界面
- [ ] 支持分布式训练

## 维护者
[维护者信息]

## 许可证
[许可证信息]
```

这个README文件现在包含了：
1. 完整的项目结构说明
2. 详细的技术架构介绍
3. 清晰的使用指南
4. 具体的配置说明
5. 性能指标说明
6. 常见问题解答
7. 未来开发计划

需要添加或修改其他内容吗？
